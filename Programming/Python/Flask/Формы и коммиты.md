---
tags:
  - flask
  - python
  - bd
---
Если мы хотим принимать какие-то данные из формы на странице, то необходимо создать форму с post-запросом.

add.html:
```html
{% extends 'base.html' %}

{% block title %}
Добавление записи
{% endblock %}

{% block body %}
<div>
	<h1>Добавить запись</h1>
	<form action="/add" method="post">
		<input type="text" name="title" id="title">
		<textarea name="text" id="text"></textarea>
		<input type="submit">
	</form>
</div>
{% endblock %}
```

Для удобства передадим каждому полю формы его идентификатор с названием поля базы данных. Аргумент name будет использоваться в обращении к переменной формы при обработке данных.
В форме указывается аргумент **action**. Он нужен, если обработка формы будет происходить не на данной странице, а на странице с другим адресом. По умолчанию (если не указывать action вообще) обработка проводится на текущей странице.

Далее создаем маршрут с обработкой формы

app.py:
```python
from flask import request, redirect

@app.route('/add', methods=['POST', 'GET'])
def add():
	# проверяем обращение на странице
	if request.method == 'POST':
		title = request.form['title']
		text = request.form['text']
		  
		try:
			# внутри add создаем экземпляр класса база
			db.session.add(model(text=text, title=title))
			# добавляем в базу данных
			db.session.commit()
			# переадресуемся на главную страницу
			return redirect('/')
		except:
			return "Произошла ошибка!'
	else:
		return render_template('add.html')
```