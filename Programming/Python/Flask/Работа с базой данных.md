---
tags:
  - flask
  - python
  - bd
---
# Начало работы
Для работы с базой данных у flask есть специальная библиотека **flask_sqlalchemy**

app.py:
```python
from flask import Flask, render_template, url_for
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
# в концигурации приложения указываем какую базу данных будем использовать
# для примера возьмем sqlite
# после /// пишем название файла базы данных
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///data.db'
# инициализируем объект базы данных с помощью flask-объекта
db = SQLAlchemy(app)
```

В flask база данных берется из модели класса, который содержит описание столбцов. Такой класс должен наследовать от встроенного объекта базы данных

app.py:
```python
from datetime import datetime

class model(db.Model):
	# тип целочисленный и уникальное значение
	id = db.Column(db.Integer, primary_key=True)
	# здесь необходима строка с максимальной длиной 100 символов
	title = db.Column(db.String(100), nullable=False)
	# специальный тип данных для большого текста
	text = db.Column(db.Text, nullable=False)
	# столбец для указания времени. по умолчанию ставится текущее время на сервере
	date = db.Column(db.DateTime, default=datetime.utcnow)

	def __repr__(self):
		return '<model %r>' % self.id
```

Все столбцы базы данных определяются через db.Column и далее указывается тип данных.
У каждой таблицы обязано быть поле **id** с уникальным значением. За этот параметр отвечает маркер **primary_key**. 
Для некоторых столбцов необходимо какое-то значение. Для этого существует специальный маркер **nullable**, в значении True может быть пустым. Если необходима какая запись, но можно поставить значение по умолчанию при пустом вводе, то маркер **default** поставить необходимое значение, которое передано в аргумент, в поле.

Подробнее о типах и маркерах здесь: [[Типы данных и маркеры базы данных]]

Теперь, чтобы создать нашу таблицу по классу выполним в интерактивном режиме python команду ```with app.app_context(): db.create_all ```
# Ссылки
[[Формы и коммиты]]